/*
  Enhanced science-themed stylesheet
  - Accessible, responsive, reduced-motion-friendly
  - Provides utility classes to remove inline styles from templates
*/

:root {
  /* Brand / semantic tokens */
  --brand-strong: #0b3d91; /* deep NASA blue */
  --brand-accent: #2ea3ff; /* sky accent */
  --brand-ink: #06263a;

  /* Core UI */
  --bg: #f4f6f8; /* page background */
  --surface: #ffffff; /* primary card */
  --surface-2: #f8fafb; /* secondary surface */
  --text: #0f1720; /* main text (high contrast) */
  --text-muted: #475569; /* secondary text */
  --border: #dbe6ef; /* subtle border */
  --ring: rgba(46, 134, 255, 0.28);
  --shadow-sm: 0 1px 2px rgba(12, 23, 34, 0.06);
  --shadow-md: 0 6px 18px rgba(12, 23, 34, 0.08);

  /* semantic colors */
  --success: #1e7e34;
  --warning: #b26b00;
  --danger: #b3261e;

  /* accessibility helpers */
  --focus-ring-width: 4px;

  /* typography */
  --ff-base: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}

/* Fluid typography */
html { font-family: var(--ff-base); font-size: 16px; }
body { color: var(--text); background: var(--bg); line-height: 1.45; -webkit-font-smoothing:antialiased; }
h1,h2,h3,h4 { color: var(--brand-ink); margin:0 0 .4rem 0 }
h1 { font-size: clamp(1.25rem, 1.2rem + 1.4vw, 2rem); }
h2 { font-size: clamp(1.1rem, 1rem + 1.0vw, 1.5rem); }
h3 { font-size: clamp(1rem, .9rem + .6vw, 1.25rem); }
small { font-size: .9rem; color:var(--text-muted) }

* { box-sizing: border-box }

/* layout container */
.container { max-width: 1280px; margin: 0 auto; padding: clamp(12px, 3vw, 28px); }

/* header */
header { background: linear-gradient(180deg,var(--brand-strong), color-mix(in srgb, var(--brand-strong) 75%, black)); color: #fff; padding: clamp(12px,2.4vw,28px); border-radius: 10px; box-shadow: var(--shadow-md); margin-bottom: 20px }
.header-content { display:flex; align-items:center; justify-content:space-between; gap:12px }
.logo { display:flex; align-items:center; gap:14px }
.logo i { font-size: clamp(1.4rem, 1.2rem + 1.2vw, 2.4rem); color: var(--brand-accent) }
.logo h1 { font-weight:700; color:#fff; font-size:clamp(1.0rem,1rem + .8vw,1.45rem); margin:0 }
.tagline { color: rgba(255,255,255,0.9); font-size:clamp(.8rem,.9vw,1rem) }

/* Buttons */
.btn { display:inline-flex; align-items:center; gap:.5rem; padding:.55rem .85rem; border-radius:8px; font-weight:600; font-size:clamp(.9rem,.9vw,1rem); border: none; cursor: pointer; transition: box-shadow .12s ease, transform .06s ease; background: var(--surface); color:var(--brand-strong); box-shadow: var(--shadow-sm); }
.btn:disabled { opacity:.5; cursor:not-allowed; transform:none }
.btn:active { transform: translateY(1px) }
.btn:focus { outline: none }
.btn:focus-visible { box-shadow: 0 0 0 var(--focus-ring-width) var(--ring); border-radius:8px }
.btn--primary { background: linear-gradient(180deg,var(--brand-strong), color-mix(in srgb,var(--brand-strong) 70%, black)); color: #fff }
.btn--neutral { background: var(--surface-2); color:var(--brand-strong) }
.btn--success { background: linear-gradient(180deg,var(--success), color-mix(in srgb,var(--success) 75%, black)); color:#fff }
.btn--danger { background: linear-gradient(180deg,var(--danger), color-mix(in srgb,var(--danger) 75%, black)); color:#fff }
.btn--ghost { background: transparent; border:1px solid var(--border) }

/* Badges */
.badge { display:inline-block; padding:.25rem .6rem; border-radius:999px; font-weight:700; font-size:.85rem }
.badge--success { background: rgba(30,126,52,0.12); color:var(--success); border:1px solid color-mix(in srgb,var(--success) 20%, transparent) }
.badge--danger { background: rgba(179,38,30,0.08); color:var(--danger); }
.badge--warning { background: rgba(178,107,0,0.08); color:var(--warning); }

/* Cards */
.card { background:var(--surface); border-radius:12px; padding: clamp(12px,1.8vw,28px); box-shadow: var(--shadow-md); border:1px solid var(--border); margin-bottom:20px }
.card--tight { padding:10px }
.card-title { font-variant: small-caps; display:flex; align-items:center; gap:.6rem; margin-bottom:12px; color:var(--brand-ink); font-weight:700 }
.card-title i { color:var(--brand-accent) }
.card-controls { display:flex; gap:.6rem; align-items:center; flex-wrap:wrap }

/* Metrics grid */
.metrics-grid { display:grid; gap:14px; grid-template-columns: repeat(3, minmax(0,1fr)); margin-bottom:18px }
.metric-card { background: linear-gradient(180deg,var(--surface), var(--surface-2)); border-left:6px solid var(--brand-accent); padding:14px; border-radius:10px; text-align:center }
.metric-value { font-size: clamp(1.2rem, 1.1rem + 1.8vw, 2rem); font-weight:800; color:var(--brand-strong) }
.metric-label { color:var(--text-muted); font-size:.9rem }
.metric-subtext { color:var(--text-muted); font-size:.85rem }

@media (max-width:1280px) { .metrics-grid { grid-template-columns: repeat(3,1fr) } }
@media (max-width:1024px) { .metrics-grid { grid-template-columns: repeat(2,1fr) } }
@media (max-width:640px) { .metrics-grid { grid-template-columns: 1fr } }

/* Chart container */
.chart-container { padding:12px }
.chart-controls { display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.chart-controls label { color:var(--text); font-weight:600 }
.chart-controls input { margin-right:6px }

/* Habitable zone lists */
.hz-planets { display:grid; grid-template-columns: 1fr 1fr; gap:12px }
.planet-list { max-height:340px; overflow:auto; padding:12px; border-radius:10px; border:1px solid var(--border); background:var(--surface-2) }
.planet-list h3 { margin:0 0 .6rem 0; color:var(--brand-ink) }
.planet-item { display:flex; gap:10px; padding:.5rem 0; border-bottom:1px dashed var(--border) }
.planet-item:last-child { border-bottom:none }

@media (max-width:640px) { .hz-planets { grid-template-columns: 1fr } }

/* Model overview */
.model-overview-grid { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)) }
.model-overview-item { padding:12px; border-radius:8px; background:var(--surface-2); border:1px solid var(--border) }
.detail-label { text-transform:uppercase; color:var(--text-muted); font-weight:700; font-size:.75rem }
.detail-value { font-size:1.25rem; font-weight:800; color:var(--brand-strong) }

/* Tables */
.table-container { width:100%; overflow:auto; border-radius:10px }
.results-table { width:100%; border-collapse:collapse; min-width:640px }
.results-table th, .results-table td { padding:12px 14px; text-align:left; border-bottom:1px solid var(--border) }
.results-table thead th { position:sticky; top:0; background:var(--surface); z-index:2; color:var(--brand-ink); font-weight:800 }
.results-table tbody tr:nth-child(odd) { background: color-mix(in srgb, var(--surface) 96%, var(--bg)) }
.results-table tbody tr:hover { background: color-mix(in srgb, var(--brand-accent) 6%, var(--surface)) }
.results-table td.numeric { text-align:right }
.sr-only, .visually-hidden { position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap }

/* Chart / iframe utilities */
.iframe-wrap { width:100%; height:640px; border:1px solid var(--border); border-radius:8px; overflow:hidden; transition: height .25s ease, opacity .2s ease }
.iframe-wrap.is-collapsed { height:0; opacity:0; }
.explore-frame { width:100%; height:100%; border:0 }

/* small utility grids/stacks */
.grid-2 { display:grid; grid-template-columns: repeat(2,1fr); gap:12px }
.grid-3 { display:grid; grid-template-columns: repeat(3,1fr); gap:12px }
.stack-sm { display:flex; gap:8px; align-items:center }
.stack-md { display:flex; gap:12px; align-items:center }

/* card tight/compact */
.card--compact { padding:.6rem }

/* Skip link */
.skip-link { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
.skip-link:focus { position:static; left:0; width:auto; height:auto; background:#fff; padding:.5rem .75rem; z-index:999 }

/* Focus visible for form elements */
input:focus-visible, select:focus-visible, button:focus-visible, a:focus-visible { outline: none; box-shadow: 0 0 0 var(--focus-ring-width) var(--ring); border-radius:6px }

/* Responsive tweaks */
@media (max-width:480px) {
  .container { padding:12px }
  .card { padding:12px }
  .results-table { min-width:520px }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important }
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #071025;
    --surface: #071a2a;
    --surface-2: #0b2637;
    --text: #e6f0ff;
    --text-muted: #9fb6cf;
    --border: rgba(255,255,255,0.04);
    --ring: rgba(46,163,255,0.16);
  }
  body { background:var(--bg); color:var(--text) }
  .card, .planet-list, .metric-card { background: var(--surface) }
  .results-table thead th { background: color-mix(in srgb, var(--surface) 70%, black) }
}

/* Print styles */
@media print {
  :root { color-scheme: light }
  body { background: #fff; color:#000 }
  header, footer, .card { box-shadow:none; border:none }
  .card { page-break-inside: avoid }
  .iframe-wrap { display:none }
  .results-table { border:1px solid #000; min-width: auto }
  .results-table th, .results-table td { background: transparent; color: #000 }
}

/* Small helpers */
.text-muted { color:var(--text-muted) }
.mt-1 { margin-top:8px } .mt-2 { margin-top:12px } .mb-1 { margin-bottom:8px } .mb-2 { margin-bottom:12px }

/* End of stylesheet - suggested minimal HTML edits below */

/*
HTML class replacements to remove inline styles (apply in templates):

1) Buttons
 - Replace inline-styled buttons like:
     <button class="btn" style="padding:6px 10px;background:#2980b9;color:#fff;">...
   with:
     <button class="btn btn--primary">...

 - Replace green/teal buttons (Open Explorer) with:
     <a class="btn btn--success" href="/explore">Open Explorer</a>

2) Chart controls and toolbar wrappers
 - Replace inline flex wrappers and style attributes with:
     <div class="card-controls"> ... </div>
 - Replace inline size/controls label styles with natural markup and use .chart-controls

3) Iframe / explore frame
 - Replace the inline explore-frame wrapper that used inline height/border with:
     <div class="iframe-wrap is-collapsed"> <iframe class="explore-frame" src="..."> </iframe> </div>
 - Toggle the collapsed state by adding/removing the .is-collapsed class.

4) Status badges
 - Replace .status-confirmed/.status-not-confirmed/.status-anomaly with:
     <span class="badge badge--success">Confirmed</span>
     <span class="badge badge--danger">Rejected</span>
     <span class="badge badge--warning">Anomaly</span>

5) Metric/grid cards and header actions
 - Replace header action inline style blocks with utility containers:
     <div class="stack-md"> <div id="lastUpdated"></div> <a class="btn btn--primary" href="/explore">Explore</a> </div>

6) Text note style
 - Replace inline small notes like <span style="color:#666;font-size:0.95rem"> with:
     <span class="text-muted"> ... </span>

Notes:
 - The above utilities and classes are designed to remove inline styles across `index.html` and `explore.html`.
 - Use .iframe-wrap and .explore-frame to maintain lazy-loading behaviour (append iframe inside .iframe-wrap and remove .is-collapsed to expand).
 - All focusable interactive elements include :focus-visible styling for keyboard accessibility.

*/

